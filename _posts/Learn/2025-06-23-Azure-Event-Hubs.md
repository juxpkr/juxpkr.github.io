---
layout: posts
title: " Azure Event Hubs: 대규모 실시간 데이터 스트리밍의 핵심 허브"
date: 2025-06-23 21:02:21 +0900
category: learn
tags:
  - 테스트
  - 블로그
---
 **Azure Event Hubs: 대규모 실시간 데이터 스트리밍의 핵심 허브**

### 1. 서론: 왜 Azure Event Hubs인가?

#### 1.1 실시간 데이터의 중요성

현대 비즈니스에서 실시간 데이터는 즉각적인 의사결정과 대응을 위해 필수적이다. 이전 Azure Functions 포스팅에서 데이터 수집을 다뤘지만, 대량의 실시간 데이터를 안정적으로 전달하기 위한 '수집 허브'가 필요하다.

#### 1.2 Event Hubs의 등장: 대규모 이벤트 수집의 필요성

모바일 기기, IoT 센서, 웹 애플리케이션 로그 등에서 초당 수백만 건에 달하는 이벤트 데이터가 쏟아져 나온다. 이러한 방대한 양의 실시간 이벤트를 안정적으로 수집하고, 손실 없이 전달하며, 여러 소비자가 동시에 접근할 수 있도록 관리하는 것은 매우 복잡한 과제이다. 기존의 전통적인 메시지 큐 시스템은 대개 이런 고처리량(high-throughput) 및 대규모 동시 연결을 위해 설계되지 않았다.

이러한 배경에서 **Azure Event Hubs**가 등장했다. Event Hubs는 초당 수백만 개의 이벤트를 수집하고, 버퍼링하며, 실시간으로 여러 애플리케이션으로 스트리밍할 수 있도록 특별히 설계된 **클라우드 기반의 대규모 이벤트 스트리밍 플랫폼**이다. 이는 실시간 데이터 파이프라인의 견고한 기반이자, 데이터 수집과 분석 단계를 이어주는 핵심적인 다리 역할을 수행한다.

#### 1.3 이 글의 목표

이 글은 Azure Event Hubs의 핵심 개념과 데이터 엔지니어링에서의 역할, 그리고 Azure Functions와 Stream Analytics와의 연동 방안을 간결하게 소개하는 것을 목표로 한다.
### 2. Azure Event Hubs 핵심 개념 

Azure Event Hubs는 확장성이 뛰어난 데이터 스트리밍 플랫폼이자 이벤트 수집 서비스이다. 실시간으로 대량의 데이터를 안정적이고 신뢰성 있게 수집, 처리 및 저장하는 데 최적화되어 있다. IoT센서, 모바일 앱, 웹사이트 클릭 스트림 등 다양한 소스에서 발생하는 이벤트를 처리하며, 수집된 데이터를 실시간 분석, 대시보드 구축, 트랜잭션 처리 등 다양한 목적으로 활용할 수 있다.

#### 2.1 이벤트(Event)와 이벤트 스트림(Event Stream)

**이벤트(Event)** 는 시스템에서 발생하는 모든 종류의 상태 변화나 관찰 가능한 사실을 나타내는 작은 데이터 단위이다. 예를 들어, IoT 센서에서 기록된 온도 값, 웹사이트에서의 사용자 클릭, 재난문자 발송 등이 모두 이벤트가 될 수 있다. 이벤트는 불변하며, 특정 시점에 발생한 사실을 기록한다.

이러한 개별 이벤트들이 시간 순서대로 연속적으로 나열된 것을 **이벤트 스트림(Event Stream)** 이라고 한다.
Event Hubs는 이러한 대규모 이벤트 스트림을 처리하고 저장하는 데 특화된 서비스이다. 이벤트 스트림은 과거의 이벤트는 그대로 유지되며 새로운 이벤트가 계속해서 추가된다.

#### 2.2 Producer와 Consumer 모델

Azure Event Hubs의 핵심은 이벤트 생산자(Producer)와 이벤트 소비자(Consumer) 모델이다. 이 모델은 데이터 흐름을 명확하게 분리하여 시스템의 유연성과 확장성을 극대화한다.

![](Pasted%20image%2020250707211810.png)
#### 2.3 네임스페이스(Namespace)와 이벤트 허브(Event Hub)

Event Hubs 리소스를 사용하기 위해서는 먼저 **네임스페이스(Namespace)** 를 생성해야 한다. 네임스페이스는 Event Hubs 인스턴스들을 관리하는 논리적인 컨테이너 역할을 한다. 여러 개의 이벤트 허브를 하나의 네임스페이스 아래에 묶어 관리할 수 있으며, 이 네임스페이스를 통해 리소스 접근 권한 및 네트워크 설정 등을 관리할 수 있다.

네임스페이스 안에 생성되는 것이 실제 이벤트 스트림이 저장되고 처리되는 핵심 엔티티인 **이벤트 허브(Event Hub)** 이다. 각 이벤트 허브는 독립적인 데이터 스트림을 나타내며, 생산자가 이벤트를 보내고 소비자가 이벤트를 읽어가는 주체가 된다.
#### 2.4 파티션(Partition)

이벤트 허브 내에서 이벤트 스트림이 분할되어 저장되는 논리적 단위이다. 처리량 증대와 파티션 내 메시지 순서 보장을 위해 사용되며, 생성 후 변경할 수 없으므로 신중한 선택이 필요하다.
#### 2.5 소비자 그룹(Consumer Group)

동일한 이벤트 스트림을 독립적으로 읽어가는 소비자 애플리케이션의 뷰이다. 여러 애플리케이션이 각자의 속도와 위치에서 데이터를 병렬 처리할 수 있게 한다.
#### 2.6 Azure Schema Registry 통합

스키마를 중앙에서 관리하고 버전별로 추적하여 데이터 스트림의 호환성을 보장한다.

#### 2.7 Kafka 호환성

Event Hubs는 Kafka 프로토콜을 지원하여 기존 Kafka 애플리케이션을 코드 변경 없이 클라우드로 쉽게 마이그레이션할 수 있게 한다.

### 3. 데이터 엔지니어링 파이프라인에서의 Azure Event Hubs 활용

#### 3.1 대규모 이벤트 데이터 수집 및 분리

Event Hubs는 고처리량과 낮은 지연 시간으로 다양한 소스의 대량 이벤트를 안정적으로 수집하며, 생산자와 소비자를 명확히 분리하여 시스템 유연성을 높인다.

#### 3.2 실시간 분석 파이프라인의 연결점

##### Azure Functions와의 연동
Azure Functions에서 처리된 데이터(예: 재난문자 API 데이터)를 Event Hubs Output Binding을 통해 Event Hubs로 푸시하여 다음 실시간 처리 단계로 연결한다.
##### Azure Stream Analytics와의 연동
Event Hubs에서 데이터를 받아 Azure Stream Analytics가 실시간으로 데이터를 처리하고 분석한다.

### 4. Azure Event Hubs 개발 및 배포 실습

실시간 데이터 파이프라인을 구축하기 위해 Azure Event Hubs를 활용하는 실습 과정을 단계별로 살펴본다. Azure Portal을 통해 Event Hubs 리소스를 생성하고, 이전 Functions 포스팅에서 개발한 함수 앱을 통해 실제로 Event Hubs로 데이터를 전송하며, 데이터가 정상적으로 수신되는지 모니터링한다.

#### 4.1 Event Hubs 리소스 생성

Event Hubs를 사용하기 위해서는 먼저 네임스페이스(Namespace)를 생성하고, 그 안에 실제 이벤트 스트림이 흐를 이벤트 허브(Event Hub)를 생성해야 한다. 네임스페이스는 Event Hubs 리소스들을 관리하는 논리적인 컨테이너 역할을 한다.

##### 4.1.1 네임스페이스 생성

Azure Portal에서 'Event Hubs 네임스페이스'를 검색하여 '만들기'를 클릭한다. 구독, 리소스 그룹, 네임스페이스 이름, 지역, 가격 책정 계측을 지정한다.

![](/assets/images/posts/create_eventHub_ns1.png)

##### 4.1.2 이벤트 허브 생성

생성된 네임스페이스 안으로 들어가 이벤트 허브를 생성한다. 이벤트 허브의 이름, 파티션 수, 메시지 보존기간 등을 설정한다. 파티션 수는 생성 후 변경할 수 없으므로, 신중하게 선택해야 한다.
![](/assets/images/posts/create_eventHub1.png)

#### 4.2 데이터 전송 실습: Azure Functions를 통해 Event Hubs로 데이터 푸시

Event Hubs 리소스가 준비되면, 이전 'Azure Functions' 포스팅에서 개발했던 재난문자 Functions App을 통해 실제로 Event Hubs로 데이터를 전송하는 실습을 진행한다. Functions App은 Timer Trigger에 의해 주기적으로 실행되며, 재난문자 API에서 새로운 메시지를 감지하면 이를 Event Hubs의 출력 바인딩을 통해 자동으로 푸시한다.

데이터가 Event Hubs로 성공적으로 전송되었는지 확인하기 위해, Azure Portal의 Event Hubs '데이터 탐색기' 또는 '메트릭스(Metrics)'를 활용하여 메시지 유입을 모니터링할 수 있다.

![](/assets/images/posts/eventHubs1.png)


### 5. Azure Event Hubs의 핵심 역할 요약

Azure Event Hubs는 현대의 실시간 데이터 파이프라인에서 **대규모 이벤트를 안정적이고 효율적으로 수집하고 전달하는 핵심적인 역할**을 수행한다. 고처리량, 파티션 기반의 확장성, 다양한 소비자 그룹 지원을 통해 데이터 생산자와 소비자를 명확히 분리하고 시스템 유연성을 극대화한다. Event Hubs는 IoT, 웹 로그, 애플리케이션 추적 등 다양한 소스에서 발생하는 방대한 실시간 데이터를 다음 분석 단계로 연결하는 견고한 다리가 된다.

#### 다음 포스팅 

Event Hubs를 통해 수집된 실시간 데이터는 이제 가공되지 않은 원본 데이터이다. 이 데이터를 의미 있는 정보로 변환하고 분석하기 위해서는 강력한 실시간 분석 엔진이 필요하다.

다음 포스팅에서는 Event Hubs에서 수집된 데이터를 실시간으로 처리하고 분석하며, 대시보드나 알림 시스템으로 결과를 전달하는 **'Azure Stream Analytics'**에 대해 심층적으로 다룰 것이다.
