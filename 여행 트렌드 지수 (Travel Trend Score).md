

1. 지수 목표 :
	-  이름 : 여행 트렌드 지수 (Travel Trend Score)
	-  내용 : 한국인들의 Google 검색 기반, 각 국가의 최근 '여행 관심도 성장세'와 '현재 인기'를 0~100 점으로 나타낸 지표
2. 데이터 수집 : 
	- 소스 : Google Trends (`pytrends` 라이브러리)
	- 대상 : 61개 해외 국가 ('국가명 여행' 키워드)
	- 방법 :
		- 4개 국가 키워드 + '해외여행'(기준 키워드) 1개를 묶어, 총 5개를 1개의 키워드 그룹으로 Pytrends에 요청 (총 16회 호출)
		- 매 요청 사이에 30초~60초 무작위 지연 필수(time.sleep) - 429 오류 방지
		- 기간 : 지난 3개월 (`timeframe = 'today 3-m`)의 일별 데이터 수집
3. 핵심 계산
	- 원시 지표 추출 : 
		1. '최근 15일' 평균 관심도 (`last_15_days_avg`) : Google Trends 일별 데이터의 가장 최근 15개 일의 평균 검색 관심도
		2. '직전 15일' 평균 관심도 (`previous_15_days_avg`) : Google Trends 일별 데이터에서 '최근 15일' 이전의 직전 15일의 평균 검색 관심도
		3. '현재 관심도' (`current_interest_score`) : Google Trends 일별 데이터의 가장 최근 1일의 검색 관심도
	- 성장률(Growth_Rate) 계산 :
		- `previous_15_days_avg` > 0 일 경우 : `growth_rate` = (`last_15_days_avg` - `previous_15_days_avg`) / `previous_15_days_avg`
		- `previous_15_days_avg` == 0 이고 `last_15_days_avg` > 0 일 경우 :
			`growth_rate` = 1.0 (이전에는 없다가 새로 생긴 관심사로 100% 성장으로 간주)
		- 그 외 경우 (모두 0이거나 데이터 부족) : `growth_rate` = 0.0
	- 최종 지수 조합 :
		1. 모든 국가의 `growth_rate` 값들을 모아 0~100으로 정규화된 '성장률 점수' 생성 (음수는 0점 처리)
		2. 모든 국가의 `current_interest` 값들을 모아 0~100으로 정규화된 '현재 관심도 점수' 생성
		3. 이 두 정규화된 점수를 가중치로 조합 :
			- 
4. 고려사항
5. 결과







**1. 지표 목표:**

- **이름:** 여행 트렌드 지수 (Travel Trend Score)
    
- **의미:** 한국인들의 Google 검색 기반, 각 국가의 **'최근 관심도 성장세'와 '현재 인기'를 0부터 100까지의 점수로 정규화한 지표.** 특히 **`해외여행` 키워드의 트렌드를 기준으로 모든 국가의 점수를 공정하게 보정**합니다.
    

**2. 데이터 수집:**

- **소스:** Google Trends (`pytrends` 라이브러리).
    
- **대상:** 61개 해외 국가 (각각 '국가명 여행' 키워드).
    
- **방법:**
    
    - 4개 국가 키워드 + '해외여행' (기준 키워드) 1개를 묶어 PyTrends에 요청 (총 16회 호출).
        
    - **매 요청 사이에 30~60초 무작위 지연 필수** (`time.sleep`) - `429` 오류 방지.
        
    - **기간:** 총 **'지난 2개월' (`timeframe='today 2-m'`)의 일별 데이터** 수집.
        

**3. 핵심 계산 상세:**

- **원시 지표 추출:**
    
    - **a. '최근 15일' 평균 관심도 (`Avg_Recent_15D`):** Google Trends 일별 데이터의 **가장 최근 15개 일의 평균** 검색 관심도.
        
    - **b. '직전 15일' 평균 관심도 (`Avg_Previous_15D`):** Google Trends 일별 데이터에서 '최근 15일' 이전의 **직전 15개 일의 평균** 검색 관심도. (즉, 총 30일치 데이터 중 첫 15일 평균)
        
    - **c. '현재 관심도' (`Current_Interest`):** Google Trends 일별 데이터의 **가장 최근 1일의 검색 관심도**.
        
- **성장률 (`Growth_Rate`) 계산:**
    
    - `Avg_Previous_15D` > 0 일 경우: `Growth_Rate = (Avg_Recent_15D - Avg_Previous_15D) / Avg_Previous_15D`
        
    - `Avg_Previous_15D` == 0 이고 `Avg_Recent_15D` > 0 일 경우: `Growth_Rate = 1.0` (이전에는 없다가 새로 생긴 관심사로, 100% 성장으로 간주)
        
    - 그 외 경우 (모두 0이거나 데이터 부족): `Growth_Rate = 0.0`
        
- **최종 지수 조합 및 '해외여행' 기준 보정 (핵심 수정 부분):**
    
    1. **'기준 키워드(`해외여행`) 성장률' 확보:** 모든 PyTrends 호출 그룹에서 얻은 `해외여행` 키워드의 `Growth_Rate` 값들을 모아, 그 **평균 성장률 (`Avg_Anchor_Growth`)**을 계산.
        
    2. **각 국가 '원시 성장률' 보정:** 각 국가의 `Growth_Rate`를 `Avg_Anchor_Growth`에 대한 **상대적 비율로 조정** (`Adjusted_Growth_Rate = (Raw_Growth_Rate / Avg_Anchor_Growth) * 100`).
        
        - `Avg_Anchor_Growth`가 0이거나 음수일 경우 (예: 전반적인 해외여행 관심도 감소/정체 시): '해외여행' 기준으로 보정하는 것이 의미 없어지므로, **모든 국가의 성장률을 단순히 0~100으로 정규화하는 대체 방식(Fallback) 사용.**
            
    3. 모든 국가의 `Adjusted_Growth_Rate` 값들을 모아 0~100으로 **정규화된 '성장률 점수'** 생성. (음수 결과는 0점 처리)
        
    4. 모든 국가의 `Current_Interest` 값들을 모아 0~100으로 **정규화된 '현재 관심도 점수'** 생성.
        
    5. 이 두 정규화된 점수를 가중치로 조합:
        
        - `W_growth` (성장률 가중치): 0.7
            
        - `W_interest` (현재 관심도 가중치): 0.3
            
        - `최종 트렌드 지수 = (성장률 점수 * W_growth) + (현재 관심도 점수 * W_interest)`
            
    6. 최종 지수를 다시 0~100점 사이의 정수로 보정.
        

**4. 중요 고려사항:**

- **데이터 품질:** `isPartial` 데이터 포함 여부, 검색량 부족(`0점` 또는 `NaN` 값) 처리 로직 포함.
    
- **오류 처리:** `429` 오류 등 문제 발생 시 해당 그룹 건너뛰거나 함수 강제 종료하여 안정성 확보.
    

**5. 결과:** 각 국가의 `trend_score`를 포함한 JSON 리스트로 반환.